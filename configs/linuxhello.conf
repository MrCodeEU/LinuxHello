# LinuxHello Configuration File
# This is the main configuration file for the LinuxHello face recognition system

# =============================================================================
# Inference Service Settings
# =============================================================================
inference:
  # gRPC service address for Python ML backend
  address: "localhost:50051"
  # Request timeout in seconds
  timeout: 10

# =============================================================================
# Camera Settings
# =============================================================================
camera:
  # Primary camera device (RGB or IR)
  device: "/dev/video0"
  
  # IR camera device (optional, for IR-only cameras like Windows Hello)
  ir_device: ""
  
  # Depth camera device (optional, for depth-based liveness)
  depth_device: ""
  
  # Capture resolution - must match camera's actual output
  width: 1920
  height: 1080
  
  # Frame rate
  fps: 30
  
  # Pixel format: MJPEG, YUYV, RGB24, GREY, Y16 (for IR)
  pixel_format: "MJPEG"
  
  # Use Intel RealSense SDK (requires librealsense2)
  use_realsense: false
  
  # Enable auto exposure
  auto_exposure: true

# =============================================================================
# Face Detection Settings
# =============================================================================
detection:
  # Path to SCRFD face detection model (ONNX format)
  model_path: "/usr/share/linuxhello/models/det_10g.onnx"
  
  # Detection confidence threshold (0.0 - 1.0)
  confidence: 0.5
  
  # Non-maximum suppression threshold (0.0 - 1.0)
  nms_threshold: 0.4
  
  # Model input size (must match model training)
  input_size: 640
  
  # Maximum number of faces to detect per frame
  max_detections: 1

# =============================================================================
# Face Recognition Settings
# =============================================================================
recognition:
  # Path to ArcFace recognition model (ONNX format)
  model_path: "/usr/share/linuxhello/models/arcface_r50.onnx"
  
  # Model input size (must match model training)
  input_size: 112
  
  # Embedding vector size (ArcFace typically uses 512)
  embedding_size: 512
  
  # Cosine similarity threshold for authentication (0.0 - 1.0)
  # Higher = more strict, Lower = more lenient
  similarity_threshold: 0.6
  
  # Number of samples to capture during enrollment
  enrollment_samples: 5

# =============================================================================
# Liveness Detection Settings
# =============================================================================
liveness:
  # Enable liveness detection
  enabled: true
  
  # Path to depth liveness model (ONNX format)
  model_path: "/usr/share/linuxhello/models/depth_liveness.onnx"
  
  # Minimum depth variance to consider face as 3D
  depth_threshold: 0.1
  
  # Liveness confidence threshold
  confidence_threshold: 0.8
  
  # Use depth camera data (requires depth camera)
  use_depth_camera: false
  
  # Use IR reflection analysis
  use_ir_analysis: true

# =============================================================================
# Challenge-Response Settings
# =============================================================================
challenge:
  # Enable challenge-response authentication
  enabled: false
  
  # Types of challenges to use
  # Available: blink, nod, turn_left, turn_right, smile
  challenge_types:
    - "blink"
  
  # Challenge timeout in seconds
  timeout_seconds: 10
  
  # Number of successful challenges required
  required_success: 1

# =============================================================================
# Lockout Protection Settings  
# =============================================================================
lockout:
  # Enable account lockout protection
  enabled: false
  
  # Maximum failed attempts before lockout
  max_failures: 5
  
  # Lockout duration in minutes
  lockout_duration: 15
  
  # Use progressive lockout (longer lockouts for repeat offenders)
  progressive_lockout: false

# =============================================================================
# Authentication Settings
# =============================================================================
auth:
  # Maximum authentication attempts before temporary lockout
  max_attempts: 3
  
  # Lockout duration in seconds after max attempts
  lockout_duration: 300
  
  # Session timeout in seconds
  session_timeout: 3600
  
  # Allow fallback to password authentication on failure
  fallback_enabled: true
  
  # Enable continuous authentication mode
  continuous_auth: false
  
  # Security level: low, medium, high
  # - low: Fastest, less secure
  # - medium: Balanced (default)
  # - high: Most secure, slower
  security_level: "medium"

# =============================================================================
# Storage Settings
# =============================================================================
storage:
  # Data directory for face embeddings and database
  data_dir: "/var/lib/linuxhello"
  
  # SQLite database path
  database_path: "/var/lib/linuxhello/linuxhello.db"
  
  # Maximum number of enrolled users
  max_users: 100
  
  # Enable automatic backups
  backup_enabled: true

# =============================================================================
# Logging Settings
# =============================================================================
logging:
  # Log level: debug, info, warn, error
  level: "info"
  
  # Log file path (empty = stdout)
  file: "/var/log/linuxhello.log"
  
  # Maximum log file size in MB
  max_size: 100
  
  # Maximum number of log file backups
  max_backups: 3
  
  # Maximum age of log files in days
  max_age: 30

# =============================================================================
# Performance Tuning
# =============================================================================
# These settings control performance vs accuracy trade-offs

# For low-end hardware, consider:
#   detection.input_size: 320
#   recognition.input_size: 112
#   camera.width: 320
#   camera.height: 240

# For high-security environments, consider:
#   recognition.similarity_threshold: 0.7
#   liveness.confidence_threshold: 0.9
#   auth.security_level: "high"
